<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
-current Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>.
<br>

<p>
<h3>Changes made between OpenBSD 6.8 and -current</h3>
<p>

<ul>
<!-- 2020/11/04 -->
<li>Added recognition of Cortex-A78AE, Cortex-X1 and Neoverse V1 arm64 CPUs.
<!-- 2020/11/03 -->
<li>Corrected an issue where <a href="https://man.openbsd.org/openssl.1">openssl(1)</a> verify might not error on expired certificates.
<li>Fixed an issue in the TLS 1.3 code that caused stalls in haproxy and other software.
<li>Changed <a href="https://man.openbsd.org/crypto.3">crypto(3)</a> to call its get_issuer() callback to try and find a suitable certificate in cases where it has failed to find a print certificate from the supplied roots and intermediates.
<li>Added the 'any' keyword to <a href="https://man.openbsd.org/iked.conf.5">iked.conf(5)</a> for requests to allow "request address any".
<!-- 2020/11/02 -->
<li>Enabled brightness keys on powerbooks where the keyboard attaches as <a href="https://man.openbsd.org/ukbd.4">ukbd(4)</a>.
<li>Set initial default display brightness on macppc via of_setbrightness() to ensure <a href="https://man.openbsd.org/wscons.4">wscons(4)</a> and ofw are in sync.
<!-- 2020/11/01 -->
<li>Added 'dynamic' keyword to <a href="https://man.openbsd.org/iked.conf.5">iked.conf(5)</a> to allow configuration of flows to dynamically assigned addresses.
<li>Implemented RFC 8914 Extended DNS Errors for <a href="https://man.openbsd.org/dig.1">dig(1)</a>.
<li>Added tracking of address proposal creation times to be able to establish total lifetime. This information is used to renew pltime/vltime of privacy addresse per RFC 4941.
<li>Changed <a href="https://man.openbsd.org/slaacd.8">slaacd(8)</a> Duplicate Address Detection (DAD) to only generate a new address if we are using Semantically Opaque Interface Identifiers.
<!-- 2020/10/31 -->
<li>Added a directive to <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> to check if a path is accessible.
<li>Fixed detection of duplicate locations in <a href="https://man.openbsd.org/httpd.8">httpd(8)</a>.
<li>Added support for passing a bootmac command line argument to RAMDISK on powerpc64.
<!-- 2020/10/30 -->
<li>Make <a href="https://man.openbsd.org/iked.8">iked(8)</a> accept ANY dynamic address with 'request addr 0.0.0.0'.
<li>Fixed the "entry point at 0x10010000" hang reported on amd64 machines by using a 64MB block to load the kernel.
<li>Changed <a href="https://man.openbsd.org/astfb.4">astfb(4)</a> to allow it to become the console on powerpc64.
<!-- 2020/10/29 -->
<li>Added support to request IP addresses as IKEv2 initiator to <a href="https://man.openbsd.org/iked.8">iked(8)</a>. If 'request addr 0.0.0.0' is configured, any address will be accepted.
<li>Added the ability to force the selection of source IP address via <a href="https://man.openbsd.org/route.8">route(8)</a>.
<li>Created a new "location (found|notfound)" option for <a href="https://man.openbsd.org/httpd.conf.5">httpd.conf(5)</a> to allow testing for resource path existence.
<!-- 2020/10/28 -->
<li>Prevented kernel reuse of mbuf memory when generating the ICMP6 response to an IPv6 packet.
<li>Updated <a href="https://man.openbsd.org/unbound.8">unbound(8)</a> to 1.12.0.
<!-- 2020/10/27 -->
<li>Added notices to syslog whenever the "%n" format string component of <a href="https://man.openbsd.org/printf.3">printf(3)</a> is used.
<li>Stopped allowing configuration of the same neighbor multiple times in <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a>.
<li>Edited <a href="https://man.openbsd.org/syspatch.8">syspatch(8)</a> to ensure SHA256.sig has at least three lines.
<li>Added limited emulation of unaligned access in the powerpc64 kernel.
<!-- 2020/10/26 -->
<li>Added AMD Vi and Intel VTD IOMMU support. This creates separate domains for each PCI device and can provide protection against invalid memory access.
<li>Fixed <a href="https://man.openbsd.org/wsconsctl.8">wsconsctl(8)</a> display commands when using <a href="https://man.openbsd.org/drm.4">drm(4)</a> drivers on macppc.
<li>Fixed a deadlock between uvn_io() and uvn_flush().
<li>Added a top-level 'reboot' command to <a href="https://man.openbsd.org/ddb.4">ddb(4)</a>.
<li>Added a -legacy_verify flag to <a href="https://man.openbsd.org/openssl.1">openssl(1)</a> to force use of the old validator.
<li>Fixed a memory leak when parsing <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a> roa-set lists.
<!-- 2020/10/25 -->
<li>Added a workaround for PCIO devices that cannot address the full 64-bit PCI address space to powerpc64. Needed for <a href="https://man.openbsd.org/radeondrm.4">radeondrm(4)</a> and <a href="https://man.openbsd.org/amdgpu.4">amdgpu(4)</a> since Radeon GPUs only implement 36, 40, or 44 bits of address space.
<li>Introduced a system-wide mutex that serializes msgbuf operations.
<li>Fixed brightness setting on MacBooks.
<!-- 2020/10/24 -->
<!-- 2020/10/23 -->
<li>Updated to <a href="https://man.openbsd.org/fonttosfnt.1">fonttosfnt(1)</a> 1.2.0.
<!-- 2020/10/22 -->
<!-- 2020/10/21 -->
<li>Added retguard macros to powerpc64 locore functions.
<li>Changed <a href="https://man.openbsd.org/ping.8">ping(8)</a> to drain the raw socket of packets received before we were fully setup to avoid reporting ICMP responses intended for other instances of ping(8) running in parallel.
<li>Made <a href="https://man.openbsd.org/sysupgrade.8">sysupgrade(8)</a> specify a version when it uses <a href="https://man.openbsd.org/fw_update.1">fw_update(1)</a> to avoid the situation where upgrading a pre-6.8 snapshot to 6.8 release with "-r" would install firmware packages from snapshots.
<!-- 2020/10/20 -->
<li>Ensured <a href="https://man.openbsd.org/copyout.9">copyout(9)</a>, <a href="https://man.openbsd.org/copyinstr.9">copyinstr(9)</a> and <a href="https://man.openbsd.org/copyoutstr.9">copyoutstr(9)</a> bail out properly if called with a length of 0 on arm64, hppa and mips64.
<li>Modified <a href="https://man.openbsd.org/daily.8">daily(8)</a> to stop reporting disk status and networking statistics.
<li>Released OpenBGPD portable 6.8p0.
<li>Released <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> 6.8p0.
<!-- 2020/10/19 -->
<!-- 2020/10/18 -->
<li>Added powerpc64 retguard macros for setjmp/longjmp.
<li>Released LibreSSL 3.2.2.
<!-- 2020/10/17 -->
<!-- 2020/10/16 -->
<li>Implemented linux interval tree functions for <a href="https://man.openbsd.org/drm.4">drm(4)</a>.
<!-- 2020/10/15 -->
<li>Added basic support for kclock timeouts to <a href="https://man.openbsd.org/timeout.9">timeout(9)</a>.
<!-- 2020/10/14 -->
<!-- 2020/10/13 -->
<li>Updated <a href="https://man.openbsd.org/nsd.8">nsd(8)</a> to 4.3.3.
<!-- 2020/10/12 -->
<li>Added RETGUARD implementation for powerpc and powerpc64.
<!-- 2020/10/11 -->
<li>Stopped exempting file systems from <a href="https://man.openbsd.org/security.8">security(8)</a> on the basis of nodev and nosuid options, which may not be used for file systems mounted beneath.
<li>Supported use of more than one URI in the TAL file for <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>, sorting with a preference for https.
<!-- 2020/10/10 -->
<li>Prevented a crash due to <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> listening on port 443 with missing TLS certificates.
<!-- 2020/10/09 -->
<li>Optimized arm64 <a href="https://man.openbsd.org/copyin.9">copyin(9)</a>, <a href="https://man.openbsd.org/copyout.9">copyout(9)</a> and <a href="https://man.openbsd.org/kcopy.9">kcopy(9)</a> by doing 16-byte copies if possible.
<li>Added <a href="https://man.openbsd.org/doas.conf.5">doas.conf(5)</a> "nolog" option to avoid <a href="https://man.openbsd.org/syslog.3">syslog(3)</a>.
<!-- 2020/10/08 -->
<!-- 2020/10/07 -->
<!-- 2020/10/06 -->
<li>Added Intel 495 Series LP PCH and Ice Lake graphics <a href="https://man.openbsd.org/pci.4">pci(4)</a> ids.
<!-- 2020/10/05 -->
<li>Fixed a pledge violation in <a href="https://man.openbsd.org/csh.1">csh(1)</a> where redirecting input from a file containing ^T would cause csh(1) to perform a tty ioctl operation against a non-tty.
<!-- 2020/10/04 -->
<li>Fixed a write hang-up on file system in <a href="https://man.openbsd.org/vnd.4">vnd(4)</a>.
<!-- 2020/10/03 -->
<li>Enabled <a href="https://man.openbsd.org/ssh_config.5">ssh_config(5)</a> UpdateHostkeys by default when the configuration has not overridden UserKnownHostFile.
<li>Added bsd.mp to powerpc64's installXX.{img,iso}.
<!-- 2020/10/02 -->
<li>Preferred ed25519 signature algorithm variants over ECDSA in <a href="https://man.openbsd.org/ssh_config.5">ssh_config(5)</a> and <a href="https://man.openbsd.org/sshd_config.5">sshd_config(5)</a>.
<li>Introduced "if_cloners_lock" rwlock and used it to serialize if_clone_{create,destroy}(), avoiding multiple race conditions.
<!-- 2020/10/01 -->
<li>Added <a href="https://man.openbsd.org/astfb.4">astfb(4)</a>, a driver for the framebuffer of the Aspeed BMC found on many POWER8 and POWER9 systems.
<li>Added Intel 400-series chipsets to <a href="https://man.openbsd.org/dwiic.4">dwiic(4)</a>.
<li>Relaxed checks in <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> and <a href="https://man.openbsd.org/pf.4">pf(4)</a> to accept any valid routing domain, even if it does not yet exist.
<!-- 2020/09/30 -->
<li>Moved mfokclock(4) from loongson to make it available for other platforms and renamed it to <a href="https://man.openbsd.org/mfokrtc.4">mfokrtc(4)</a>.
<li>Removed osrelease from system.fvwmrc, as the version string matches the kernel of the <a href="https://man.openbsd.org/fvwm.1">fvwm(1)</a> build machine, not the user's kernel.
<li>Moved to 6.8-current.
</ul>
